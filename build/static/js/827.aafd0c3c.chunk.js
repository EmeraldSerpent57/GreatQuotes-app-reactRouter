"use strict";(self.webpackChunkreact_complete_guide=self.webpackChunkreact_complete_guide||[]).push([[827],{995:function(e,t,n){var r=n(236),s=n(165),o=n(861),a=n(152),u=n(791);function c(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,u.useReducer)(c,{status:t?"pending":null,data:null,error:null}),i=(0,a.Z)(n,2),l=i[0],d=i[1],m=(0,u.useCallback)(function(){var t=(0,o.Z)((0,s.Z)().mark((function t(n){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:r=t.sent,d({type:"SUCCESS",responseData:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return(0,r.Z)({sendRequest:m},l)}},853:function(e,t,n){n.d(t,{Ir:function(){return h},KP:function(){return d},Lf:function(){return u},h_:function(){return p},jR:function(){return i}});var r=n(165),s=n(236),o=n(861),a="https://multipage-quote-app-fdaaa-default-rtdb.firebaseio.com";function u(){return c.apply(this,arguments)}function c(){return(c=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o,u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/quotes.json"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=8;break}throw new Error(n.message||"Could not fetch quotes.");case 8:for(u in o=[],n)c=(0,s.Z)({id:u},n[u]),o.push(c);return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return(l=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/quotes/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(o=e.sent,n.ok){e.next=8;break}throw new Error(o.message||"Could not fetch quote.");case 8:return u=(0,s.Z)({id:t},o),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return(m=(0,o.Z)((0,r.Z)().mark((function e(t){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/quotes.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(s=e.sent,n.ok){e.next=8;break}throw new Error(s.message||"Could not create quote.");case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return(f=(0,o.Z)((0,r.Z)().mark((function e(t){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/comments/").concat(t.quoteId,".json"),{method:"POST",body:JSON.stringify(t.commentData),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(s=e.sent,n.ok){e.next=8;break}throw new Error(s.message||"Could not add comment.");case 8:return e.abrupt("return",{commentId:s.name});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return x.apply(this,arguments)}function x(){return(x=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,u,c,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a,"/comments/").concat(t,".json"));case 2:return n=e.sent,e.next=5,n.json();case 5:if(o=e.sent,n.ok){e.next=8;break}throw new Error(o.message||"Could not get comments.");case 8:for(c in u=[],o)i=(0,s.Z)({id:c},o[c]),u.push(i);return e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},827:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(152),s=n(791),o=n(270),a=n(880),u=n(523),c=n(185),i="Card_card__9h8Dh",l=n(184),d=function(e){return(0,l.jsx)("div",{className:i,children:e.children})},m=n(556),h="QuoteForm_form__ogBoi",f="QuoteForm_loading__gyIuQ",p="QuoteForm_control__8SqBM",x="QuoteForm_actions__I8AC6",j="QuoteForm_invalid__yZe6r",v="QuoteForm_errorText__FKhoe",_="QuoteForm_backbtn__e-ILa",b=function(e){return""===e.trim()},g=function(e){var t=(0,s.useState)(!1),n=(0,r.Z)(t,2),o=n[0],i=n[1],g=(0,s.useState)({author:!0,submitter:!0,text:!0}),y=(0,r.Z)(g,2),w=y[0],Z=y[1],k=(0,s.useRef)(),N=(0,s.useRef)(),C=(0,s.useRef)();return(0,l.jsxs)(s.Fragment,{children:[(0,l.jsx)(a.NL,{when:o,message:function(e){return"Are you sure you want to leave? All changes will be lost!"}}),(0,l.jsx)(u.rU,{className:_,to:"/quotes",children:(0,l.jsx)(c.And,{})}),(0,l.jsx)(d,{children:(0,l.jsxs)("form",{onFocus:function(){i(!0)},className:h,onSubmit:function(t){t.preventDefault();var n=k.current.value,r=N.current.value,s=C.current.value,o=!b(n),a=!b(r),u=!b(s);Z({author:o,submitter:u,text:a}),o&&a&&u&&(e.onAddQuote({author:n,text:r,submitter:s}),k.current.value="",N.current.value="",C.current.value="")},children:[e.isLoading&&(0,l.jsx)("div",{className:f,children:(0,l.jsx)(m.Z,{})}),(0,l.jsxs)("div",{className:"".concat(p," ").concat(w.author?"":j),children:[(0,l.jsx)("label",{htmlFor:"author",children:"Author"}),(0,l.jsx)("input",{type:"text",id:"author",ref:k}),!w.author&&(0,l.jsx)("p",{className:v,children:"Field must not be empty."})]}),(0,l.jsxs)("div",{className:"".concat(p," ").concat(w.text?"":j),children:[(0,l.jsx)("label",{htmlFor:"text",children:"Text"}),(0,l.jsx)("textarea",{id:"text",rows:"5",ref:N}),!w.text&&(0,l.jsx)("p",{className:v,children:"Field must not be empty."})]}),(0,l.jsxs)("div",{className:"".concat(p," ").concat(w.submitter?"":j),children:[(0,l.jsx)("label",{htmlFor:"submitter",children:"Submitted By (can enter a unique username)"}),(0,l.jsx)("input",{type:"text",id:"submitter",ref:C}),!w.submitter&&(0,l.jsx)("p",{className:v,children:"Field must not be empty."})]}),(0,l.jsx)("div",{className:x,children:(0,l.jsx)("button",{onClick:function(){i(!1)},className:"btn",children:"Add Quote"})})]})})]})},y=n(995),w=n(853),Z="Modal_modalOverlay__m8jDu",k="Modal_modal__RajTW",N="Modal_header__VdBgK",C="Modal_content__0gsT8",S="Modal_actions__f+o3e";function q(e){return(0,l.jsx)("div",{className:Z,children:(0,l.jsxs)("div",{className:k,children:[(0,l.jsx)("header",{className:N,children:(0,l.jsx)("h2",{children:e.title})}),(0,l.jsx)("div",{className:C,children:(0,l.jsx)("p",{children:e.message})}),(0,l.jsx)("footer",{className:S,children:(0,l.jsx)("button",{className:"btn",onClick:e.onConfirm,children:"Return to All Quotes"})})]})})}var F=function(e){return(0,l.jsx)(q,{title:e.title,message:e.message,onConfirm:e.onConfirm})},R=function(){var e=(0,y.Z)(w.KP),t=e.sendRequest,n=e.status,u=(0,a.k6)(),c=(0,s.useState)(),i=(0,r.Z)(c,2),d=i[0],m=i[1];(0,s.useEffect)((function(){"completed"===n&&m({title:"Your quote has been added",message:"Thank you for your contribution!"})}),[n]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(o.q,{children:[(0,l.jsx)("title",{children:"Add a New Quote"}),(0,l.jsx)("meta",{name:"description",content:"Add a new funny, serious, or thought-provoking quote to the page"})]}),(0,l.jsx)(g,{isLoading:"pending"===n,onAddQuote:function(e){t(e)}}),d&&(0,l.jsx)(F,{title:d.title,message:d.message,onConfirm:function(){u.push("/quotes")}})]})}}}]);
//# sourceMappingURL=827.aafd0c3c.chunk.js.map